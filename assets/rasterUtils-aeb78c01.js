import{g as L}from"./index-c754ff65.js";import{f as d}from"./vec2f64-22afc56f.js";import{r as U}from"./capabilities-57d1a30a.js";import{M as A,P as c,U as G,G as _,L as p,D as h,o as n}from"./enums-64ab819c.js";import{E as O}from"./Texture-ca46920b.js";function R(t,e,a="nearest",i=!1){var f;const r=!(i&&e.pixelType==="u8"),o=r?_.FLOAT:_.UNSIGNED_BYTE,s=e.pixels==null||e.pixels.length===0?null:r?e.getAsRGBAFloat():e.getAsRGBA(),u=(f=t.capabilities.textureFloat)==null?void 0:f.textureFloatLinear,g={width:e.width,height:e.height,target:A.TEXTURE_2D,pixelFormat:c.RGBA,internalFormat:t.type===U.WEBGL2&&r?G.RGBA32F:c.RGBA,samplingMode:!u||a!=="bilinear"&&a!=="cubic"?p.NEAREST:p.LINEAR,dataType:o,wrapMode:h.CLAMP_TO_EDGE,flipped:!1};return new O(t,g,s)}function w(t,e){const{spacing:a,offsets:i,coefficients:r,size:[o,s]}=e,u=a[0]>1,g={width:u?4*o:o,height:s,target:A.TEXTURE_2D,pixelFormat:c.RGBA,internalFormat:t.type===U.WEBGL2?G.RGBA32F:c.RGBA,dataType:_.FLOAT,samplingMode:p.NEAREST,wrapMode:h.CLAMP_TO_EDGE,flipped:!1},f=new Float32Array(u?o*s*16:2*i.length);if(u&&r!=null)for(let m=0,l=0;m<r.length;m++)f[l++]=r[m],m%3==2&&(f[l++]=1);else for(let m=0;m<s;m++)for(let l=0;l<o;l++){const E=4*(m*o+l),T=2*(l*s+m);f[E]=i[T],f[E+1]=i[T+1],f[E+3]=i[T]===-1?0:1}return new O(t,g,f)}function N(t,e){const a={width:e.length/4,height:1,target:A.TEXTURE_2D,pixelFormat:c.RGBA,internalFormat:c.RGBA,dataType:_.UNSIGNED_BYTE,samplingMode:p.NEAREST,wrapMode:h.CLAMP_TO_EDGE,flipped:!1};return new O(t,a,e)}function V(t,e,a,i=1,r=!0){return{u_flipY:r,u_applyTransform:!!t,u_opacity:i,u_transformSpacing:t?t.spacing:d,u_transformGridSize:t?t.size:d,u_targetImageSize:e,u_srcImageSize:a}}function y(t,e){return{u_colormapOffset:e||0,u_colormapMaxIndex:t?t.length/4-1:0}}function k(t,e){return{u_scale:t,u_offset:e}}function I(t){return{u_bandCount:t.bandCount,u_minOutput:t.outMin,u_maxOutput:t.outMax,u_minCutOff:t.minCutOff,u_maxCutOff:t.maxCutOff,u_factor:t.factor,u_useGamma:t.useGamma,u_gamma:t.gamma,u_gammaCorrection:t.gammaCorrection}}function v(t){return{u_hillshadeType:t.hillshadeType,u_sinZcosAs:t.sinZcosAs,u_sinZsinAs:t.sinZsinAs,u_cosZs:t.cosZs,u_weights:t.weights,u_factor:t.factor,u_minValue:t.minValue,u_maxValue:t.maxValue}}function S(t,e){const a=t.gl,i=e.glName,r=new Map;if(L(i))return r;const o=a.getProgramParameter(i,a.ACTIVE_UNIFORMS);let s;for(let u=0;u<o;u++)s=a.getActiveUniform(i,u),s&&r.set(s.name,{location:a.getUniformLocation(i,s.name),info:s});return r}function D(t,e,a){Object.keys(a).forEach(i=>{const r=e.get(i)||e.get(i+"[0]");r&&x(t,i,a[i],r)})}function z(t,e,a,i){a.length===i.length&&(i.some(r=>r==null)||a.some(r=>r==null)||a.forEach((r,o)=>{e.setUniform1i(r,o),t.bindTexture(i[o],o)}))}function x(t,e,a,i){if(i===null||a==null)return!1;const{info:r}=i;switch(r.type){case n.FLOAT:r.size>1?t.setUniform1fv(e,a):t.setUniform1f(e,a);break;case n.FLOAT_VEC2:t.setUniform2fv(e,a);break;case n.FLOAT_VEC3:t.setUniform3fv(e,a);break;case n.FLOAT_VEC4:t.setUniform4fv(e,a);break;case n.FLOAT_MAT3:t.setUniformMatrix3fv(e,a);break;case n.FLOAT_MAT4:t.setUniformMatrix4fv(e,a);break;case n.INT:r.size>1?t.setUniform1iv(e,a):t.setUniform1i(e,a);break;case n.BOOL:t.setUniform1i(e,a?1:0);break;case n.INT_VEC2:case n.BOOL_VEC2:t.setUniform2iv(e,a);break;case n.INT_VEC3:case n.BOOL_VEC3:t.setUniform3iv(e,a);break;case n.INT_VEC4:case n.BOOL_VEC4:t.setUniform4iv(e,a);break;default:return!1}return!0}export{v as A,I as E,D as O,k as T,N as _,R as c,z as d,y as g,S as h,w as l,V as p};
