import{n as h,ab as f,g as a}from"./index-c754ff65.js";var n;function w(t,e,o={}){const r=g(t);for(;r.length>1;){const s=i(e,r.shift(),o);if(h(s))return s}return b(e,r.shift(),o)}function g(t){const e=f("esri-force-webgl");if(e===n.WEBGL1||e===n.WEBGL2)return[e];switch(t){case"2d":return f("mac")&&f("chrome")?[n.WEBGL1,n.WEBGL2]:[n.WEBGL2,n.WEBGL1];case"3d":return[n.WEBGL2,n.WEBGL1]}}function b(t,e,o={}){if(!window.WebGLRenderingContext)return E(t,m),null;const r=i(t,e,o);return a(r)&&E(t,G),r}function i(t,e,o={}){const r=e===n.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let s=null;for(const l of r){try{s=t.getContext(l,o)}catch{}if(s)break}return s}function E(t,e){const o=t.parentNode;o&&(o.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+e+"</div></div></td></tr></table>")}(function(t){t[t.WEBGL1=1]="WEBGL1",t[t.WEBGL2=2]="WEBGL2"})(n||(n={}));const m='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',G=`It doesn't appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>`;let p,c;function y(t){const e=g(t);for(;e.length>1;){const o=d(e.shift());if(o.available)return o}return d(e.shift())}function d(t){switch(t){case n.WEBGL1:return L();case n.WEBGL2:return W()}}function L(){return p||(p=F()),p}function W(){return c||(c=C()),c}class _{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}}class T extends _{constructor(){super(...arguments),this.type=n.WEBGL1}}class v extends _{constructor(){super(...arguments),this.type=n.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}}function x(t,e){var l;if(t===n.WEBGL1&&typeof WebGLRenderingContext>"u"||t===n.WEBGL2&&typeof WebGL2RenderingContext>"u")return null;const o=document.createElement("canvas");if(!o)return null;let r=i(o,t,{failIfMajorPerformanceCaveat:!0});if(a(r)&&(r=i(o,t),h(r)&&(e.majorPerformanceCaveat=!0)),a(r))return r;if(t===n.WEBGL1){const u=(l=r.getParameter(r.VERSION))==null?void 0:l.match(/^WebGL\s+([\d.]*)/);if(u){const B=parseFloat(u[1]);e.available=B>=.94}}else e.available=!0;e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const s=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return s&&(e.supportsHighPrecisionFragment=s.precision>0),r}function F(){const t=new T,e=x(n.WEBGL1,t);return a(e)||(t.supportsElementIndexUint=e.getExtension("OES_element_index_uint")!==null,t.supportsStandardDerivatives=e.getExtension("OES_standard_derivatives")!==null,t.supportsInstancedArrays=e.getExtension("ANGLE_instanced_arrays")!==null,t.supportsTextureFloat=e.getExtension("OES_texture_float")!==null,t.supportsTextureHalfFloat=e.getExtension("OES_texture_half_float")!==null,t.supportsColorBufferFloat=e.getExtension("WEBGL_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=e.getExtension("EXT_color_buffer_half_float")!==null),t}function C(){const t=new v,e=x(n.WEBGL2,t);return a(e)||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}export{y as l,w as o,n as r};
