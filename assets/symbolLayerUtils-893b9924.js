import{z as i,n as a,U as h,hc as d,hd as b,ad as w,_ as v,em as z,he as _}from"./index-1de34779.js";import{e as g}from"./ItemCache-edc397ee.js";let s=y();function y(){return new g(50)}function P(){s=y()}function O(e,r){if(e.type==="icon")return l(e,r);if(e.type==="object")return f(e,r);throw new i("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function R(e,r){if(e.type==="icon")return j(e,r);if(e.type==="object")return B(e,r);throw new i("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function l(e,r){var t,n;if((t=e.resource)!=null&&t.href)return L(e.resource.href).then(o=>[o.width,o.height]);if((n=e.resource)!=null&&n.primitive)return a(r)?[r,r]:[256,256];throw new i("symbol3d:invalid-symbol-layer","symbol layers of type Icon must have either an href or a primitive resource")}function j(e,r){return l(e,r).then(t=>{if(e.size==null)return t;const n=t[0]/t[1];return n>1?[e.size,e.size/n]:[e.size*n,e.size]})}function L(e){return h(e,{responseType:"image"}).then(r=>r.data)}function f(e,r){return S(e,r).then(t=>d(t))}async function B(e,r){const t=await f(e,r);return b(t,e)}async function S(e,r){var n;if(!e.isPrimitive){const o=w((n=e.resource)==null?void 0:n.href),u=s.get(o);if(u!==void 0)return u;const m=await v(()=>import("./objectResourceUtils-57ddd3e5.js").then(p=>p.o),["assets/objectResourceUtils-57ddd3e5.js","assets/devEnvironmentUtils-5002a058.js","assets/index-1de34779.js","assets/index-252dcfb5.css","assets/mat3-fdb5e70d.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/BufferView-86190885.js","assets/vec2-a3077e7b.js","assets/vec33-06d3e863.js","assets/DefaultMaterial_COLOR_GAMMA-c246c80f.js","assets/types-e1c0a5bf.js","assets/enums-64ab819c.js","assets/Version-342d9d2b.js","assets/quat-499150bf.js","assets/quatf64-3363c48e.js","assets/resourceUtils-71fe9113.js","assets/basicInterfaces-b7051eb1.js","assets/Indices-aaefd607.js","assets/MapView-bd487abe.js","assets/Viewpoint-ea32c9f1.js","assets/Cyclical-49a6a04d.js","assets/CollectionFlattener-69c675dd.js","assets/TileInfo-c53ba83b.js","assets/aaBoundingRect-da6cd5b1.js","assets/TileKey-b87e0dc5.js","assets/widget-4447051f.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/AttachmentInfo-191d5abd.js","assets/Heading-bde04247.js","assets/symbolUtils-0c3c786b.js","assets/utils-47432d32.js","assets/ItemCache-edc397ee.js","assets/utils-960d8c85.js","assets/colorUtils-c0f43caf.js","assets/mat2d-e3bbc217.js","assets/webStyleSymbolUtils-1470c8f4.js","assets/executeQueryJSON-7409703b.js","assets/utils-fd07bdbf.js","assets/query-87b53af6.js","assets/normalizeUtils-744c3a37.js","assets/normalizeUtilsCommon-5bd32cf4.js","assets/pbfQueryUtils-9e72fccf.js","assets/pbf-2cecd0ba.js","assets/OptimizedGeometry-48f8abe8.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/featureConversionUtils-b6ed3a7e.js","assets/Scheduler-895f76dc.js","assets/layerViewUtils-5da1782e.js","assets/GoTo-2f121aae.js","assets/accessibleHandler-c78ecdf0.js","assets/vmEvent-d773b6c5.js","assets/Map-183141ee.js","assets/Basemap-05b492be.js","assets/loadAll-0643270c.js","assets/writeUtils-c3a30ac3.js","assets/basemapUtils-d89c0772.js","assets/TablesMixin-a90c4927.js","assets/GraphicsCollection-96c69dc0.js","assets/ViewingMode-915d19cb.js","assets/unitBezier-881ac1eb.js","assets/vec2f64-22afc56f.js","assets/TileStrategy-ae37d4cf.js","assets/TileInfoView-d2de27b2.js","assets/quickselect-56c5966e.js","assets/TileKey-d02c5724.js","assets/capabilities-99358f40.js","assets/NestedMap-1b5db22e.js","assets/requestImageUtils-f0df98ec.js","assets/Util-9e53ddb1.js","assets/sphere-bdfc981d.js","assets/lineSegment-84775312.js","assets/VertexAttribute-15d1866a.js","assets/OrderIndependentTransparency-e1b3a745.js","assets/Texture-33390e7d.js","assets/VertexArrayObject-a0fc2785.js","assets/VertexElementDescriptor-2925c6af.js","assets/InterleavedLayout-f573c806.js","assets/vec3f32-ad1dc57f.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/symbolColorUtils-d21bc936.js"]),c=await m.fetch(o,{disableTextures:!0});return s.put(o,c.referenceBoundingBox),c.referenceBoundingBox}let t=null;if(e.resource&&e.resource.primitive&&(t=z(_(e.resource.primitive)),a(r)))for(let o=0;o<t.length;o++)t[o]*=r;return t?Promise.resolve(t):Promise.reject(new i("symbol:invalid-resource","The symbol does not have a valid resource"))}export{P as clearBoundingBoxCache,l as computeIconLayerResourceSize,O as computeLayerResourceSize,R as computeLayerSize,f as computeObjectLayerResourceSize};
