import{a3 as w,z as v,e as o,y as t,a as h}from"./index-c754ff65.js";import{e as g,W as m,n as d}from"./widget-7352089c.js";import{u}from"./Viewpoint-eb6ec031.js";import{t as y}from"./GoTo-9b5cecfc.js";import{t as b}from"./accessibleHandler-b82b4bb4.js";import{e as _}from"./vmEvent-d773b6c5.js";import"./uuid-73213768.js";import"./Cyclical-5c5da130.js";let s=class extends y(w.EventedAccessor){constructor(e){super(e),this._initialViewpoint=null,this._goingHomeController=null,this.go=this.go.bind(this)}destroy(){this._cancelGo(),this.view=null}get state(){return this.get("view.ready")?this._goingHomeController?"going-home":"ready":"disabled"}set view(e){this._initialViewpoint=null,this._set("view",e),e&&e.when().then(()=>{this.view===e&&(this._initialViewpoint=e.viewpoint.clone(),this.notifyChange("viewpoint"))})}get viewpoint(){return this._get("viewpoint")||this._initialViewpoint}set viewpoint(e){this._set("viewpoint",e)}async go(){var n;if(!this.get("view.ready"))throw new v("home:disabled-state","Cannot go when disabled.");this._cancelGo(),this.emit("go");const e=new AbortController;this._goingHomeController=e;try{await((n=this.view)==null?void 0:n.when()),await this.callGoTo({target:this.viewpoint,options:{signal:e.signal}})}catch{}this._goingHomeController=null}cancelGo(){this._cancelGo()}_cancelGo(){const{_goingHomeController:e}=this;e&&e.abort(),this._goingHomeController=null}};o([t()],s.prototype,"_goingHomeController",void 0),o([t({readOnly:!0})],s.prototype,"state",null),o([t()],s.prototype,"view",null),o([t({type:u})],s.prototype,"viewpoint",null),o([t()],s.prototype,"go",null),o([t()],s.prototype,"cancelGo",null),s=o([h("esri.widgets.Home.HomeViewModel")],s);const c=s,r={base:"esri-home esri-widget--button esri-widget",esriIcon:"esri-icon",loadingIcon:"esri-icon-loading-indicator",rotatingIcon:"esri-rotating",widgetIcon:"esri-icon-home",disabled:"esri-disabled"};let i=class extends m{constructor(e,n){super(e,n),this.iconClass=r.widgetIcon,this.messages=null,this.messagesCommon=null,this.viewModel=new c}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get viewpoint(){return this.viewModel.viewpoint}set viewpoint(e){this.viewModel.viewpoint=e}cancelGo(){this.viewModel.cancelGo()}go(){return this.viewModel.go()}render(){var a;const e=(a=this.viewModel)==null?void 0:a.state,{messagesCommon:n,messages:l}=this,p={[r.disabled]:e==="disabled"};return d("div",{bind:this,class:this.classes(r.base,p),role:"button",tabIndex:0,onclick:this._go,onkeydown:this._go,"aria-label":l.widgetLabel,title:e==="going-home"?n.cancel:l.title},this.renderIcon())}renderIcon(){var l;const e=(l=this.viewModel)==null?void 0:l.state,n={[r.esriIcon]:!0,[this.iconClass]:e!=="going-home",[r.loadingIcon]:e==="going-home",[r.rotatingIcon]:e==="going-home"};return d("span",{"aria-hidden":"true",class:this.classes(n)})}_go(){const{viewModel:e}=this;e.state==="going-home"?e.cancelGo():e.go()}};o([t()],i.prototype,"goToOverride",null),o([t()],i.prototype,"iconClass",void 0),o([t()],i.prototype,"label",null),o([t(),g("esri/widgets/Home/t9n/Home")],i.prototype,"messages",void 0),o([t(),g("esri/t9n/common")],i.prototype,"messagesCommon",void 0),o([t()],i.prototype,"uiStrings",void 0),o([t()],i.prototype,"view",null),o([t({type:c}),_("go")],i.prototype,"viewModel",void 0),o([t()],i.prototype,"viewpoint",null),o([b()],i.prototype,"_go",null),i=o([h("esri.widgets.Home")],i);const $=i;export{$ as default};
